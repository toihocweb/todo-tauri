import{e as h,a as l,m as d,j as t,B as n,P as v,X as f,l as o,n as _,R as y}from"./event-BoZfvjaH.js";/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],N=h("pause",j);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],T=h("rotate-cw",k);function S(){const[s,i]=l.useState({todo_title:"Loading...",original_seconds:0,remaining_seconds:0,is_active:!1,is_paused:!1}),m=e=>{const a=Math.floor(e/60),r=e%60;return`${a.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`},u=()=>s.is_paused?"text-yellow-400":s.remaining_seconds<=60?"text-red-400":s.remaining_seconds<=300?"text-orange-400":"text-green-400",c=async()=>{try{const e=await o("get_timer_state");i(e)}catch(e){console.error("Failed to load timer state:",e)}},w=async()=>{try{await o("pause_timer"),i(e=>({...e,is_paused:!0,is_active:!1}))}catch(e){console.error("Failed to pause timer:",e)}},x=async()=>{try{await o("resume_timer"),i(e=>({...e,is_paused:!1,is_active:!0}))}catch(e){console.error("Failed to resume timer:",e)}},b=async()=>{try{await o("restart_timer"),await c()}catch(e){console.error("Failed to restart timer:",e)}},g=async()=>{try{await o("close_timer_window")}catch(e){console.error("Failed to close timer:",e)}},p=async e=>{if(e.button===0)try{await o("start_window_drag")}catch(a){console.error("Failed to start drag:",a)}};return l.useEffect(()=>{c();const e=d("timer-update",r=>{i(r.payload)}),a=d("timer-finished",()=>{console.log("Timer finished!")});return()=>{e.then(r=>r()),a.then(r=>r())}},[]),t.jsx("div",{className:"h-screen w-full bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center overflow-hidden",children:t.jsxs("div",{className:"relative bg-black/40 backdrop-blur-xl shadow-2xl select-none cursor-grab active:cursor-grabbing",style:{width:"180px",height:"100px"},onMouseDown:p,children:[t.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[t.jsx("div",{className:"absolute top-0 left-0 w-6 h-6 border-t-2 border-l-2 border-white/40"}),t.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 border-t-2 border-r-2 border-white/40"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b-2 border-l-2 border-white/40"}),t.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b-2 border-r-2 border-white/40"})]}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center top-5",children:t.jsx("div",{className:`text-2xl font-mono font-bold ${u()} drop-shadow-lg leading-none`,children:m(s.remaining_seconds)})}),t.jsx("div",{className:"absolute top-2 left-3 text-xs text-white/80 truncate max-w-16",children:s.todo_title}),t.jsxs("div",{className:"absolute top-1.5 right-2 flex gap-1",children:[s.is_paused?t.jsx(n,{onClick:x,variant:"ghost",size:"sm",className:"h-5 w-5 p-0 text-green-400 hover:text-green-300 hover:bg-white/20 border border-white/10",title:"Resume",children:t.jsx(v,{className:"w-2.5 h-2.5"})}):t.jsx(n,{onClick:w,variant:"ghost",size:"sm",className:"h-5 w-5 p-0 text-yellow-400 hover:text-yellow-300 hover:bg-white/20 border border-white/10",title:"Pause",children:t.jsx(N,{className:"w-2.5 h-2.5"})}),t.jsx(n,{onClick:b,variant:"ghost",size:"sm",className:"h-5 w-5 p-0 text-blue-400 hover:text-blue-300 hover:bg-white/20 border border-white/10",title:"Restart",children:t.jsx(T,{className:"w-2.5 h-2.5"})}),t.jsx(n,{onClick:g,variant:"ghost",size:"sm",className:"h-5 w-5 p-0 text-white/70 hover:text-white hover:bg-white/20 border border-white/10",title:"Close",children:t.jsx(f,{className:"w-3 h-3"})})]})]})})}_.createRoot(document.getElementById("timer-root")).render(t.jsx(y.StrictMode,{children:t.jsx(S,{})}));
